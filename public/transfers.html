<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Visual Transfers</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        body { background: #f0f2f5; font-family: sans-serif; padding: 20px; }

        .transfer-row {
            background: white; border-radius: 16px; padding: 20px; margin-bottom: 20px;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            display: flex; align-items: center; justify-content: space-between;
            position: relative; overflow: hidden;
        }

        /* Warehouses */
        .wh-box {
            width: 80px; height: 80px; border-radius: 12px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-weight: bold; font-size: 12px; z-index: 2;
            background: #f1f5f9; border: 2px solid #cbd5e1; color: #64748b; transition: 0.3s;
        }
        .wh-box.active {
            background: #dbeafe; border-color: #3b82f6; color: #1e40af; transform: scale(1.1); box-shadow: 0 0 15px rgba(59, 130, 246, 0.5);
        }

        /* The Neon Snake Path */
        .path-container { flex: 1; margin: 0 20px; position: relative; height: 10px; background: #e2e8f0; border-radius: 5px; }
        
        .neon-snake {
            position: absolute; top: 0; left: 0; bottom: 0; width: 30%;
            background: linear-gradient(90deg, transparent, #22c55e, transparent);
            border-radius: 5px;
            animation: snakeMove 2s infinite linear;
            opacity: 0; /* Hidden by default */
        }
        
        .transfer-row.active .neon-snake { opacity: 1; }
        
        @keyframes snakeMove {
            0% { left: -30%; }
            100% { left: 100%; }
        }

        /* Document Button */
        .doc-btn {
            padding: 8px 16px; border-radius: 8px; font-weight: bold; font-size: 12px;
            background: #e2e8f0; color: #94a3af; cursor: not-allowed; transition: 0.3s;
        }
        .doc-btn.ready {
            background: #22c55e; color: white; cursor: pointer;
            box-shadow: 0 0 10px #22c55e; animation: pulseBtn 1.5s infinite;
        }
        
        @keyframes pulseBtn { 0% {transform: scale(1);} 50% {transform: scale(1.05);} 100% {transform: scale(1);} }

    </style>
</head>
<body>

    <h2 class="text-xl font-black text-slate-800 mb-6 flex items-center gap-2">
        <i class="fas fa-exchange-alt text-blue-600"></i> העברות פעילות
    </h2>

    <div class="transfer-row active" id="trans-1">
        <div class="wh-box active">
            <i class="fas fa-warehouse text-2xl mb-1"></i>
            סניף החרש
        </div>

        <div class="path-container">
            <div class="neon-snake"></div> <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 text-xs font-bold text-green-600 bg-green-50 px-2 py-1 rounded">
                עלי בדרך
            </div>
        </div>

        <div class="wh-box">
            <i class="fas fa-building text-2xl mb-1"></i>
            סניף התלמיד
        </div>
    </div>

    <div class="flex justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-gray-100 mt-4">
        <div class="text-sm">
            <div class="font-bold">תעודה #4712365</div>
            <div class="text-xs text-gray-500">ממתין לאישור מנהל</div>
        </div>
        
        <button id="doc-btn-1" class="doc-btn" onclick="viewDoc()">
            <i class="fas fa-file-pdf"></i> מסמך לא הגיע
        </button>
        
        <button onclick="managerApprove()" class="text-red-500 font-bold text-xs underline ml-4">
            מנהל? אשר ללא מסמך
        </button>
    </div>

    <script>
        // סימולציה: קבלת מסמך (מפעיל את האורות)
        setTimeout(() => {
            const btn = document.getElementById('doc-btn-1');
            btn.classList.add('ready');
            btn.innerHTML = '<i class="fas fa-file-pdf"></i> צפה בתעודה';
            
            // השמעת צליל עדין
            new Audio('https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.m4a').play();
            
            Swal.fire({
                toast: true, position: 'top-end', 
                icon: 'success', title: 'התקבל מסמך להעברה!', 
                showConfirmButton: false, timer: 3000
            });
        }, 5000); // אחרי 5 שניות

        function viewDoc() {
            if(document.getElementById('doc-btn-1').classList.contains('ready')) {
                window.open('https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf');
            }
        }

        function managerApprove() {
            Swal.fire({
                title: 'אישור מנהל חריג',
                text: 'האם לאשר העמסה לפני קבלת מסמך?',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                confirmButtonText: 'כן, אני לוקח אחריות',
                cancelButtonText: 'ביטול'
            }).then((res) => {
                if(res.isConfirmed) {
                    Swal.fire('אושר!', 'עלי קיבל אישור העמסה חריג.', 'success');
                }
            });
        }
    </script>
</body>
</html>
