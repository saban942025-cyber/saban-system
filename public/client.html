// 1. בטעינת הדף - שחזור עגלה
window.onload = async () => {
    // ... הקוד הקיים ...
    
    // שחזור עגלה מהזיכרון המקומי
    const savedCart = localStorage.getItem('saban_cart');
    if (savedCart) {
        cart = JSON.parse(savedCart);
        updateCartUI();
    }
};

// 2. עדכון פונקציית העדכון לשמירה אוטומטית
function updateCartUI() {
    // שמירה ל-Local Storage
    localStorage.setItem('saban_cart', JSON.stringify(cart));

    const total = cart.reduce((acc, i) => acc + i.qty, 0);
    const badge = document.getElementById('cartBadge');
    badge.innerText = total; badge.classList.toggle('hidden', total === 0);
    
    // ... המשך הקוד הקיים של הרינדור ...
}

// 3. איפוס מלא (כולל מחיקה מהזיכרון)
window.clearCart = () => { 
    cart = []; 
    localStorage.removeItem('saban_cart');
    updateCartUI(); 
};
