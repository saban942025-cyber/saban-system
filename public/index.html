<script>
        // ---  住  ---
        let isSoundOn = false;
        
        // 爪
        const SOUNDS = {
            knock: new Audio('https://assets.mixkit.co/active_storage/sfx/2346/2346-preview.m4a'), // 拽砖 注
            siren: new Audio('https://assets.mixkit.co/active_storage/sfx/933/933-preview.m4a'),   // 爪驻专 拽
            success: new Audio('https://assets.mixkit.co/active_storage/sfx/1111/1111-preview.m4a') // 爪
        };

        function toggleSound() {
            const btn = document.getElementById('sound-toggle');
            const icon = btn.querySelector('i');

            if (!isSoundOn) {
                // 砖专专 住转 驻驻
                SOUNDS.knock.play().catch(()=>{}); 
                isSoundOn = true;
                btn.classList.remove('muted');
                btn.classList.add('active');
                icon.className = 'fas fa-volume-up';
                Swal.fire({ toast: true, position: 'top', icon: 'success', title: '住 驻注', showConfirmButton: false, timer: 1500 });
            } else {
                isSoundOn = false;
                btn.classList.remove('active');
                btn.classList.add('muted');
                icon.className = 'fas fa-volume-mute';
            }
        }

        // --- 驻拽爪转 转专 砖专转 ---
        window.triggerAlert = (type, msg) => {
            console.log(" 转专:", type, msg);

            // 1. 专
            if (navigator.vibrate) {
                if (type === 'buzzer') navigator.vibrate([500, 100, 500, 100, 500]); // 专 专住
                else navigator.vibrate(100); // 专 注
            }

            // 2. 住 (拽砖  爪驻专)
            if (isSoundOn) {
                if (type === 'buzzer') {
                    SOUNDS.siren.currentTime = 0;
                    SOUNDS.siren.play();
                } else if (type === 'success') {
                    SOUNDS.success.currentTime = 0;
                    SOUNDS.success.play();
                } else {
                    // 专专转 : 拽砖 注
                    SOUNDS.knock.currentTime = 0;
                    SOUNDS.knock.volume = 0.5; // 砖  拽 
                    SOUNDS.knock.play();
                }
            }

            // 3.  
            if (type === 'buzzer') {
                Swal.fire({
                    title: ' 爪驻专 爪转!',
                    text: msg,
                    icon: 'warning',
                    confirmButtonColor: '#ef4444',
                    confirmButtonText: '拽转',
                    backdrop: `rgba(255,0,0,0.4)` // 专拽注  
                });
            } else {
                // 注 注 注
                Swal.fire({
                    toast: true,
                    position: 'top-end',
                    icon: type === 'success' ? 'success' : 'info',
                    title: msg,
                    showConfirmButton: false,
                    timer: 3000
                });
            }
        };
        
        // ... (砖专 驻拽爪转  砖专转 转 专) ...
        
        // --- 驻拽爪转  驻注 专转 ---
        function toggleDrawer() {
            document.getElementById('drawer').classList.toggle('open');
            document.getElementById('drawer-bg').classList.toggle('open');
        }
        function loadPage(url, title) {
            document.getElementById('header-title').innerText = title;
            document.getElementById('app-frame').src = url;
            toggleDrawer();
        }
        window.addEventListener('message', (event) => {
            if(event.data.type === 'ALERT') {
                triggerAlert(event.data.alertType, event.data.msg);
            }
        });

    </script>
</body>
</html>
