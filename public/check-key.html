<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saban API Tester | ××¢×‘×“×ª ××¤×ª×—×•×ª</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>body { background: #1e293b; color: white; font-family: sans-serif; }</style>
</head>
<body class="p-10">

    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold mb-2 text-blue-400"><i class="fas fa-stethoscope"></i> ××¢×‘×“×ª ×‘×“×™×§×ª ××¤×ª×—×•×ª</h1>
        <p class="text-gray-400 mb-8">×›×œ×™ ×œ××‘×—×•×Ÿ ×ª×§×œ×•×ª ×‘×—×™×‘×•×¨ ×œ×’×•×’×œ ×•-Gemini</p>

        <div class="bg-slate-800 p-6 rounded-xl border border-slate-700 mb-8">
            <h2 class="text-xl font-bold mb-4 flex items-center gap-2"><i class="fas fa-brain text-purple-400"></i> ×‘×“×™×§×ª Gemini AI</h2>
            
            <div class="grid gap-4 mb-4">
                <div>
                    <label class="text-xs text-gray-400">××¤×ª×— API (Gemini Key)</label>
                    <input id="geminiKey" class="w-full bg-slate-900 border border-slate-600 p-3 rounded text-white font-mono" placeholder="AIzaSy...">
                </div>
                <div>
                    <label class="text-xs text-gray-400">×‘×—×¨ ××•×“×œ ×œ×‘×“×™×§×”</label>
                    <select id="geminiModel" class="w-full bg-slate-900 border border-slate-600 p-3 rounded text-white">
                        <option value="gemini-1.5-flash">gemini-1.5-flash (×”×—×“×© ×•×”××”×™×¨)</option>
                        <option value="gemini-pro">gemini-pro (×”×™×©×Ÿ ×•×”×™×¦×™×‘)</option>
                    </select>
                </div>
            </div>
            <button onclick="testGemini()" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded font-bold w-full">×‘×“×•×§ ×—×™×‘×•×¨ ×œ××•×—</button>
            <div id="geminiResult" class="mt-4 p-4 rounded bg-black/30 font-mono text-sm min-h-[50px] whitespace-pre-wrap">×××ª×™×Ÿ ×œ×‘×“×™×§×”...</div>
        </div>

        <div class="bg-slate-800 p-6 rounded-xl border border-slate-700">
            <h2 class="text-xl font-bold mb-4 flex items-center gap-2"><i class="fab fa-google text-blue-400"></i> ×‘×“×™×§×ª ×—×™×¤×•×© ×’×•×’×œ (Search)</h2>
            
            <div class="grid gap-4 mb-4">
                <div>
                    <label class="text-xs text-gray-400">××¤×ª×— API (Search Key)</label>
                    <input id="searchKey" class="w-full bg-slate-900 border border-slate-600 p-3 rounded text-white font-mono" placeholder="AIzaSy...">
                </div>
                <div>
                    <label class="text-xs text-gray-400">××–×”×” ×× ×•×¢ ×—×™×¤×•×© (CX ID)</label>
                    <input id="searchCX" class="w-full bg-slate-900 border border-slate-600 p-3 rounded text-white font-mono" placeholder="Ex: 56qt2qgr...">
                </div>
            </div>
            <button onclick="testSearch()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded font-bold w-full">×‘×“×•×§ ×—×™×‘×•×¨ ×œ×—×™×¤×•×©</button>
            <div id="searchResult" class="mt-4 p-4 rounded bg-black/30 font-mono text-sm min-h-[50px] whitespace-pre-wrap">×××ª×™×Ÿ ×œ×‘×“×™×§×”...</div>
        </div>

    </div>

    <script>
        async function testGemini() {
            const key = document.getElementById('geminiKey').value.trim();
            const model = document.getElementById('geminiModel').value;
            const log = document.getElementById('geminiResult');
            
            if(!key) return alert("×—×¡×¨ ××¤×ª×—");

            log.innerText = "ğŸ”„ ××ª×—×‘×¨ ×œ×’×•×’×œ...";
            log.className = "mt-4 p-4 rounded bg-yellow-900/30 text-yellow-200 font-mono text-sm";

            const url = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${key}`;
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: "×”×× ××ª×” ×¢×•×‘×“?" }] }] })
                });

                const data = await response.json();

                if (response.ok) {
                    log.className = "mt-4 p-4 rounded bg-green-900/30 text-green-200 font-mono text-sm border border-green-500";
                    log.innerText = `âœ… ×”×¦×œ×—×”!\n×”××•×“×œ ${model} ×¢× ×”:\n"${data.candidates[0].content.parts[0].text}"`;
                } else {
                    handleError(log, response.status, data);
                }
            } catch (e) {
                log.className = "mt-4 p-4 rounded bg-red-900/30 text-red-200 font-mono text-sm border border-red-500";
                log.innerText = `âŒ ×©×’×™××ª ×¨×©×ª:\n${e.message}`;
            }
        }

        async function testSearch() {
            const key = document.getElementById('searchKey').value.trim();
            const cx = document.getElementById('searchCX').value.trim();
            const log = document.getElementById('searchResult');

            if(!key || !cx) return alert("×—×¡×¨ ××¤×ª×— ××• CX");

            log.innerText = "ğŸ”„ ××‘×¦×¢ ×—×™×¤×•×© × ×™×¡×™×•×Ÿ...";
            log.className = "mt-4 p-4 rounded bg-yellow-900/30 text-yellow-200 font-mono text-sm";

            const url = `https://customsearch.googleapis.com/customsearch/v1?key=${key}&cx=${cx}&q=test`;

            try {
                const response = await fetch(url);
                const data = await response.json();

                if (response.ok) {
                    log.className = "mt-4 p-4 rounded bg-green-900/30 text-green-200 font-mono text-sm border border-green-500";
                    log.innerText = `âœ… ×”×¦×œ×—×”!\n× ××¦××• ${data.searchInformation?.totalResults || 0} ×ª×•×¦××•×ª.\n(×”××¤×ª×— ×•×”-CX ×ª×§×™× ×™×)`;
                } else {
                    handleError(log, response.status, data);
                }
            } catch (e) {
                log.className = "mt-4 p-4 rounded bg-red-900/30 text-red-200 font-mono text-sm border border-red-500";
                log.innerText = `âŒ ×©×’×™××ª ×¨×©×ª:\n${e.message}`;
            }
        }

        function handleError(elem, status, data) {
            elem.className = "mt-4 p-4 rounded bg-red-900/30 text-red-200 font-mono text-sm border border-red-500";
            let explanation = "";

            if (status === 400) explanation = "×‘×§×©×” ×œ× ×ª×§×™× ×” (××•×œ×™ ××¤×ª×— ×©×’×•×™ ××• ××•×“×œ ×œ× ×§×™×™× ×‘×¤×¨×•×™×§×˜ ×”×–×”).";
            if (status === 403) explanation = "××™×Ÿ ×”×¨×©××” (×”××¤×ª×— ×—×¡×•×, ××• ×©×”-API ×œ× ×”×•×¤×¢×œ ×‘×§×•× ×¡×•×œ).";
            if (status === 404) explanation = "×œ× × ××¦× (×”××•×“×œ ×œ× ×§×™×™× ××• ×©×”-URL ×©×’×•×™).";
            if (status === 429) explanation = "×™×•×ª×¨ ××“×™ ×‘×§×©×•×ª (Quota Exceeded).";

            elem.innerText = `âŒ ×©×’×™××” ${status}:\n${explanation}\n\n×¤×™×¨×•×˜ ×˜×›× ×™:\n${JSON.stringify(data.error, null, 2)}`;
        }
    </script>
</body>
</html>
