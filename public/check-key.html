<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Saban Keys Tester | ×‘×“×™×§×ª ××¤×ª×—×•×ª</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>body { background: #0f172a; color: white; font-family: sans-serif; }</style>
</head>
<body class="p-8">

    <div class="max-w-3xl mx-auto">
        <h1 class="text-3xl font-bold mb-6 text-blue-400 border-b border-gray-700 pb-4">
            <i class="fas fa-key"></i> ×‘×“×™×§×ª ××¤×ª×—×•×ª - ×¡×‘×Ÿ
        </h1>

        <div class="bg-slate-800 p-6 rounded-xl border border-slate-700 mb-6">
            <h2 class="text-xl font-bold mb-4 text-purple-400">1. ×‘×“×™×§×ª ××•×— (Gemini)</h2>
            <div class="flex gap-2 mb-4">
                <input id="geminiKey" type="text" value="AIzaSyAdfGVrmr90Mp9ZhNMItD81iaE8OipKwz0" class="flex-1 bg-slate-900 border border-slate-600 p-2 rounded text-gray-300 font-mono text-sm" readonly>
                <select id="geminiModel" class="bg-slate-900 border border-slate-600 p-2 rounded text-white text-sm">
                    <option value="gemini-1.5-flash">1.5 Flash (×—×“×©)</option>
                    <option value="gemini-pro">Pro (×™×©×Ÿ)</option>
                </select>
            </div>
            <button onclick="testGemini()" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded font-bold w-full transition">
                ğŸš€ ×‘×“×•×§ ××•×—
            </button>
            <div id="geminiResult" class="mt-4 p-3 rounded bg-black/40 font-mono text-xs whitespace-pre-wrap hidden"></div>
        </div>

        <div class="bg-slate-800 p-6 rounded-xl border border-slate-700">
            <h2 class="text-xl font-bold mb-4 text-green-400">2. ×‘×“×™×§×ª ×—×™×¤×•×© (Google Search)</h2>
            <div class="grid gap-2 mb-4">
                <div class="flex items-center gap-2">
                    <span class="w-16 text-xs text-gray-400">Key:</span>
                    <input id="searchKey" type="text" value="AIzaSyDLkShn6lBBew-PJJWtzvAe_14UF9Kv-QI" class="flex-1 bg-slate-900 border border-slate-600 p-2 rounded text-gray-300 font-mono text-sm" readonly>
                </div>
                <div class="flex items-center gap-2">
                    <span class="w-16 text-xs text-gray-400">CX ID:</span>
                    <input id="searchCX" type="text" value="56qt2qgr7up25uvi5yjnmgqr3" class="flex-1 bg-slate-900 border border-slate-600 p-2 rounded text-gray-300 font-mono text-sm">
                </div>
            </div>
            <button onclick="testSearch()" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded font-bold w-full transition">
                ğŸ” ×‘×“×•×§ ×—×™×¤×•×©
            </button>
            <div id="searchResult" class="mt-4 p-3 rounded bg-black/40 font-mono text-xs whitespace-pre-wrap hidden"></div>
        </div>

    </div>

    <script>
        // --- ×¤×•× ×§×¦×™×™×ª ×‘×“×™×§×ª GEMINI ---
        async function testGemini() {
            const key = document.getElementById('geminiKey').value;
            const model = document.getElementById('geminiModel').value;
            const ui = showLog('geminiResult', '×‘×•×“×§ ×ª×§×©×•×¨×ª ×¢× ×”××•×—...', 'wait');

            const url = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${key}`;
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: "×‘×“×™×§×ª ××¢×¨×›×ª. ×¢× ×” ×‘××™×œ×” ××—×ª: ×ª×§×™×Ÿ." }] }] })
                });

                const data = await response.json();

                if (response.ok) {
                    const ans = data.candidates?.[0]?.content?.parts?.[0]?.text || "×¨×™×§";
                    showLog('geminiResult', `âœ… ×”×¦×œ×—×”! ×”××•×— ×¢× ×”:\n"${ans}"`, 'success');
                } else {
                    showLog('geminiResult', `âŒ ×©×’×™××ª API (${response.status}):\n${JSON.stringify(data.error, null, 2)}`, 'error');
                    analyzeError(response.status, 'geminiResult');
                }
            } catch (e) {
                showLog('geminiResult', `âŒ ×©×’×™××ª ×¨×©×ª (×—×¡×•×?):\n${e.message}`, 'error');
            }
        }

        // --- ×¤×•× ×§×¦×™×™×ª ×‘×“×™×§×ª SEARCH ---
        async function testSearch() {
            const key = document.getElementById('searchKey').value;
            const cx = document.getElementById('searchCX').value;
            const ui = showLog('searchResult', '××‘×¦×¢ ×—×™×¤×•×© × ×™×¡×™×•×Ÿ ×‘×’×•×’×œ...', 'wait');

            const url = `https://customsearch.googleapis.com/customsearch/v1?key=${key}&cx=${cx}&q=test`;

            try {
                const response = await fetch(url);
                const data = await response.json();

                if (response.ok) {
                    showLog('searchResult', `âœ… ×”×¦×œ×—×”! × ××¦××• ${data.searchInformation?.totalResults} ×ª×•×¦××•×ª.\n×”××¤×ª×— ×•×”-CX ×ª×§×™× ×™×.`, 'success');
                } else {
                    showLog('searchResult', `âŒ ×©×’×™××ª API (${response.status}):\n${JSON.stringify(data.error, null, 2)}`, 'error');
                    analyzeError(response.status, 'searchResult');
                }
            } catch (e) {
                showLog('searchResult', `âŒ ×©×’×™××ª ×¨×©×ª:\n${e.message}`, 'error');
            }
        }

        // --- ×¢×–×¨×™× ---
        function showLog(id, text, type) {
            const el = document.getElementById(id);
            el.classList.remove('hidden');
            el.innerText = text;
            el.className = `mt-4 p-3 rounded font-mono text-xs whitespace-pre-wrap border ${
                type === 'success' ? 'bg-green-900/30 text-green-300 border-green-600' :
                type === 'error' ? 'bg-red-900/30 text-red-300 border-red-600' :
                'bg-yellow-900/30 text-yellow-300 border-yellow-600'
            }`;
            return el;
        }

        function analyzeError(status, id) {
            const el = document.getElementById(id);
            let msg = "\nğŸ’¡ × ×™×ª×•×— ×”×‘×¢×™×”:\n";
            if (status === 403) msg += "- ×”××¤×ª×— ×—×¡×•× (Referrer) ××• ×©×”-API ×œ× ×”×•×¤×¢×œ ×‘×¡×¤×¨×™×™×” (Library).";
            if (status === 404) msg += "- ×”××•×“×œ/×›×ª×•×‘×ª ×œ× ×§×™×™××™×. × ×¡×” ××•×“×œ ××—×¨.";
            if (status === 400) msg += "- ××¤×ª×— ×œ× ×ª×§×™×Ÿ ××• CX ×©×’×•×™.";
            el.innerText += msg;
        }
    </script>
</body>
</html>
