<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>SabanOS | × ×™×”×•×œ ××©×ª××©×™× (Windows Style)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* --- WINDOWS 11 THEME --- */
        :root {
            --win-bg: #f3f3f3;
            --win-card: #ffffff;
            --win-border: #e5e5e5;
            --win-blue: #0067c0;
            --win-blue-hover: #005a9e;
            --win-text: #202020;
            --win-text-sec: #5d5d5d;
            --shadow-card: 0 2px 4px rgba(0,0,0,0.04), 0 4px 12px rgba(0,0,0,0.04);
        }

        body { 
            background-color: var(--win-bg); 
            color: var(--win-text); 
            font-family: 'Segoe UI', system-ui, sans-serif; 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            overflow: hidden; 
        }

        /* Layout */
        .window-container {
            flex: 1;
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 20px;
            padding: 20px;
            overflow: hidden;
        }

        /* Card / Window Style */
        .win-card {
            background: var(--win-card);
            border: 1px solid var(--win-border);
            border-radius: 8px;
            box-shadow: var(--shadow-card);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .win-header {
            padding: 16px;
            border-bottom: 1px solid var(--win-border);
            background: #fafafa;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .win-title {
            font-size: 16px;
            font-weight: 600;
        }

        /* Inputs */
        .win-input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #d1d1d1;
            border-radius: 4px;
            font-size: 14px;
            background: white;
            transition: 0.2s;
            outline: none;
            border-bottom-width: 2px;
        }
        .win-input:focus {
            border-color: var(--win-blue);
        }
        .win-input:disabled {
            background-color: #f0f0f0;
            color: #999;
        }
        .win-label {
            font-size: 12px;
            font-weight: 500;
            color: var(--win-text-sec);
            margin-bottom: 4px;
            display: block;
        }

        /* Buttons */
        .win-btn {
            background-color: var(--win-card);
            border: 1px solid #d1d1d1;
            color: var(--win-text);
            padding: 6px 16px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: 0.1s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
        }
        .win-btn:hover { background-color: #f0f0f0; }
        .win-btn:active { background-color: #e0e0e0; transform: scale(0.98); }

        .win-btn-primary {
            background-color: var(--win-blue);
            color: white;
            border-color: var(--win-blue);
        }
        .win-btn-primary:hover { background-color: var(--win-blue-hover); }
        
        .win-btn-danger {
            color: #dc2626;
            border-color: #fca5a5;
        }
        .win-btn-danger:hover { background-color: #fef2f2; }

        /* Tabs */
        .win-tabs { display: flex; padding: 4px; background: #f0f0f0; border-radius: 6px; margin-bottom: 15px; }
        .win-tab { flex: 1; text-align: center; padding: 6px; font-size: 13px; cursor: pointer; border-radius: 4px; color: var(--win-text-sec); font-weight: 500; transition: 0.2s; }
        .win-tab.active { background: white; color: black; shadow: 0 1px 2px rgba(0,0,0,0.1); font-weight: 600; }

        /* Table */
        .win-table { width: 100%; border-collapse: collapse; font-size: 13px; }
        .win-table th { text-align: right; padding: 10px; border-bottom: 1px solid var(--win-border); color: var(--win-text-sec); font-weight: 600; background: #fafafa; position: sticky; top: 0; }
        .win-table td { padding: 10px; border-bottom: 1px solid #f0f0f0; vertical-align: middle; }
        .win-table tr:hover { background-color: #f3f9fd; }

        /* Avatar */
        .avatar-circle { width: 32px; height: 32px; border-radius: 50%; object-fit: cover; border: 1px solid var(--win-border); }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-thumb { background: #ccc; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #999; }

        /* Status Bar */
        .status-bar { height: 30px; background: var(--win-blue); color: white; display: flex; align-items: center; padding: 0 20px; font-size: 11px; justify-content: space-between; }
    </style>
</head>
<body>

    <div class="window-container">
        
        <div class="win-card">
            <div class="win-header">
                <span class="win-title" id="formTitle"><i class="fas fa-user-plus text-blue-600"></i> ×™×¦×™×¨×ª ××©×ª××©</span>
                <button onclick="resetForm()" id="cancelBtn" class="text-xs text-red-500 hidden hover:underline">×‘×™×˜×•×œ ×¢×¨×™×›×”</button>
            </div>
            
            <div class="p-5 flex-1 overflow-y-auto">
                
                <div class="win-tabs">
                    <div onclick="switchTab('staff')" class="win-tab active" id="tab-staff">ğŸ‘¨â€ğŸ’¼ ××™×© ×¦×•×•×ª</div>
                    <div onclick="switchTab('client')" class="win-tab" id="tab-client">ğŸ—ï¸ ×œ×§×•×—</div>
                </div>

                <form id="createForm" class="space-y-4">
                    <input type="hidden" id="editUserId"> <div class="flex items-center gap-4">
                        <img id="avatarPreview" src="https://ui-avatars.com/api/?name=New+User" class="w-14 h-14 rounded-full border shadow-sm">
                        <div class="flex-1">
                            <label class="win-label">×ª××•× ×ª ×¤×¨×•×¤×™×œ (URL)</label>
                            <input type="text" id="avatar" class="win-input" placeholder="https://..." oninput="updateAvatar()">
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="win-label">×©× ××œ×</label>
                            <input type="text" id="name" class="win-input" required placeholder="×©× ×•×©× ××©×¤×—×”">
                        </div>
                        <div>
                            <label class="win-label">×˜×œ×¤×•×Ÿ</label>
                            <input type="tel" id="phone" class="win-input" required placeholder="050...">
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="win-label">××™××™×™×œ (×œ×›× ×™×¡×”)</label>
                            <input type="email" id="email" class="win-input" required>
                        </div>
                        <div>
                            <label class="win-label">×¡×™×¡××”</label>
                            <input type="text" id="password" class="win-input" value="Saban2025" required>
                        </div>
                    </div>

                    <div id="staffFields" class="space-y-3 p-3 bg-blue-50 rounded border border-blue-100">
                        <h4 class="text-xs font-bold text-blue-800 uppercase">×¤×¨×˜×™ ×ª×¤×§×™×“</h4>
                        <div>
                            <label class="win-label">×ª×¤×§×™×“ ×‘××¢×¨×›×ª</label>
                            <select id="roleSelect" class="win-input" onchange="updateRoleDesc()">
                                <option value="admin">ğŸ‘‘ ×× ×›"×œ / ××“××™×Ÿ</option>
                                <option value="ops">ğŸ•¹ï¸ ×× ×”×œ ×ª×¤×¢×•×œ</option>
                                <option value="purchasing">ğŸ›’ ×¨×›×©</option>
                                <option value="warehouse">ğŸ“¦ ××—×¡× ××™</option>
                                <option value="driver">ğŸš› × ×”×’</option>
                            </select>
                        </div>
                        <div>
                            <label class="win-label">×¡× ×™×£ / ××—×œ×§×”</label>
                            <input type="text" id="branch" class="win-input" placeholder="×œ××©×œ: ×¡× ×™×£ ×”×—×¨×©">
                        </div>
                        <div>
                            <label class="win-label">×ª×™××•×¨ ××•×˜×•××˜×™</label>
                            <textarea id="description" class="win-input h-16 text-xs"></textarea>
                        </div>
                    </div>

                    <div id="clientFields" class="hidden space-y-3 p-3 bg-green-50 rounded border border-green-100">
                        <h4 class="text-xs font-bold text-green-800 uppercase">×¤×¨×˜×™ ×œ×§×•×—</h4>
                        <div>
                            <label class="win-label">××¡×¤×¨ ×œ×§×•×— (ERP)</label>
                            <input type="text" id="clientNumber" class="win-input" placeholder="12345">
                        </div>
                        <div class="border-t border-green-200 pt-2">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-xs font-bold">×¤×¨×•×™×§×˜×™×</span>
                                <button type="button" onclick="addProjectField()" class="text-xs text-blue-600 font-bold hover:underline">+ ×”×•×¡×£ ×¤×¨×•×™×§×˜</button>
                            </div>
                            <div id="projectsContainer" class="space-y-2 max-h-32 overflow-y-auto"></div>
                        </div>
                    </div>

                    <div class="pt-2">
                        <button type="submit" id="submitBtn" class="win-btn win-btn-primary w-full py-2.5">
                            <i class="fas fa-save"></i> ×©××•×¨ ×‘××¢×¨×›×ª
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <div class="win-card">
            <div class="win-header">
                <span class="win-title">ğŸ‘¥ ×××’×¨ ××©×ª××©×™×</span>
                <div class="flex gap-2">
                    <button onclick="loadUsers()" class="win-btn" title="×¨×¢× ×Ÿ ×¨×©×™××”"><i class="fas fa-sync-alt"></i></button>
                    <input type="text" id="searchUser" oninput="filterUsers()" placeholder="×—×™×¤×•×©..." class="win-input w-48 py-1">
                </div>
            </div>
            
            <div class="flex-1 overflow-hidden relative">
                <div class="absolute inset-0 overflow-y-auto">
                    <table class="win-table">
                        <thead>
                            <tr>
                                <th class="w-12"></th>
                                <th>×©×</th>
                                <th>×ª×¤×§×™×“</th>
                                <th>×¤×¨×˜×™× / ×¡× ×™×£</th>
                                <th class="text-center">×¤×¢×•×œ×•×ª</th>
                            </tr>
                        </thead>
                        <tbody id="usersTable">
                            <tr><td colspan="5" class="text-center p-5 text-gray-400">×˜×•×¢×Ÿ × ×ª×•× ×™×...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>

    <div class="status-bar">
        <div id="systemStatus">ğŸŸ¢ ××¢×¨×›×ª ××•×›× ×”</div>
        <div>SabanOS Admin Station v2.6</div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
        import { getFirestore, doc, setDoc, updateDoc, collection, getDocs, deleteDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        // --- Firebase Config ---
        const firebaseConfig = { apiKey: "AIzaSyA3qwgBX69Clu7pUdOnOEcfzUVyR7ADrNc", authDomain: "saban94-eb5f0.firebaseapp.com", projectId: "saban94-eb5f0", storageBucket: "saban94-eb5f0.firebasestorage.app", messagingSenderId: "656829273946", appId: "1:656829273946:web:8ebcb440ed280aff014563" };
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let currentTab = 'staff';
        let usersList = [];

        // --- EXPORT FUNCTIONS TO WINDOW (For HTML onclick) ---
        window.switchTab = switchTab;
        window.loadUsers = loadUsers;
        window.filterUsers = filterUsers;
        window.deleteUser = deleteUser;
        window.editUser = editUser;
        window.resetForm = resetForm;
        window.addProjectField = addProjectField;
        window.updateAvatar = updateAvatar;
        window.updateRoleDesc = updateRoleDesc;

        // --- Status Logic ---
        function setStatus(msg, isError = false) {
            const el = document.getElementById('systemStatus');
            el.innerHTML = isError ? `ğŸ”´ ${msg}` : `ğŸŸ¢ ${msg}`;
            el.parentElement.style.backgroundColor = isError ? '#d32f2f' : '#0067c0';
        }

        // --- 1. Load Users ---
        async function loadUsers() {
            setStatus("×˜×•×¢×Ÿ ××©×ª××©×™×...");
            try {
                const snap = await getDocs(collection(db, "users"));
                if (snap.empty) {
                    usersList = [];
                    document.getElementById('usersTable').innerHTML = '<tr><td colspan="5" class="text-center p-5">×”×××’×¨ ×¨×™×§. ×¦×•×¨ ××©×ª××© ×—×“×©.</td></tr>';
                    setStatus("×”×××’×¨ ×¨×™×§");
                    return;
                }
                usersList = snap.docs.map(d => ({...d.data(), id: d.id})); 
                renderTable(usersList);
                setStatus(`× ×˜×¢× ×• ${usersList.length} ××©×ª××©×™×`);
            } catch (e) {
                console.error("Load error:", e);
                setStatus("×©×’×™××” ×‘×˜×¢×™× ×ª ××©×ª××©×™×: " + e.message, true);
                document.getElementById('usersTable').innerHTML = `<tr><td colspan="5" class="text-center p-5 text-red-500">×©×’×™××”: ${e.message}</td></tr>`;
            }
        };

        // --- 2. Render Table ---
        function renderTable(list) {
            const tbody = document.getElementById('usersTable');
            tbody.innerHTML = list.map(u => {
                const isStaff = u.type !== 'client';
                const info = isStaff ? (u.branch || '-') : `${(u.projects||[]).length} ××ª×¨×™×`;
                const roleClass = isStaff ? 'bg-blue-100 text-blue-800' : 'bg-green-100 text-green-800';
                const roleName = u.role === 'admin' ? '×× ×›"×œ' : (u.role === 'client' ? '×œ×§×•×—' : u.role);
                
                return `
                <tr class="border-b hover:bg-slate-50">
                    <td class="text-center"><img src="${u.avatar || 'https://via.placeholder.com/32'}" class="avatar-circle" onerror="this.src='https://via.placeholder.com/32'"></td>
                    <td class="font-bold">${u.name}</td>
                    <td><span class="text-[10px] px-2 py-1 rounded font-bold ${roleClass}">${roleName}</span></td>
                    <td class="text-gray-500">${info}</td>
                    <td class="text-center">
                        <button onclick="deleteUser('${u.id}')" class="win-btn win-btn-danger px-2" title="××—×§"><i class="fas fa-trash"></i></button>
                        <button onclick="editUser('${u.id}')" class="win-btn px-2 text-blue-600" title="×¢×¨×•×š"><i class="fas fa-edit"></i></button>
                    </td>
                </tr>`;
            }).join('');
        }

        // --- 3. Edit Logic ---
        function editUser(id) {
            const user = usersList.find(u => u.id === id);
            if (!user) return;

            // ×©×™× ×•×™ ××¦×‘ ×œ×¢×¨×™×›×”
            document.getElementById('formTitle').innerHTML = `<i class="fas fa-edit text-orange-500"></i> ×¢×¨×™×›×ª ${user.name}`;
            document.getElementById('editUserId').value = id;
            document.getElementById('submitBtn').innerHTML = '<i class="fas fa-save"></i> ×¢×“×›×Ÿ ×©×™× ×•×™×™×';
            document.getElementById('submitBtn').className = "win-btn win-btn-primary w-full py-2.5 bg-orange-600 border-orange-600 hover:bg-orange-700";
            document.getElementById('cancelBtn').classList.remove('hidden');

            // ××™×œ×•×™ ×©×“×•×ª
            document.getElementById('name').value = user.name;
            document.getElementById('email').value = user.email;
            document.getElementById('email').disabled = true; // ××™ ××¤×©×¨ ×œ×©× ×•×ª ××™××™×™×œ ×§×™×™× ×‘×§×œ×•×ª ×‘×’×œ×œ Auth
            document.getElementById('password').disabled = true; // ×¡×™×¡××” ×¨×§ ×‘×™×¦×™×¨×”
            document.getElementById('phone').value = user.phone;
            document.getElementById('avatar').value = user.avatar;
            updateAvatar();

            // ×”×—×œ×¤×ª ×˜××‘ ×•××™×œ×•×™ ×©×“×•×ª ×¡×¤×¦×™×¤×™×™×
            if (user.type === 'client') {
                switchTab('client');
                document.getElementById('clientNumber').value = user.clientNumber || '';
                // Projects
                const container = document.getElementById('projectsContainer');
                container.innerHTML = '';
                if (user.projects) {
                    user.projects.forEach(p => {
                        const div = document.createElement('div');
                        div.className = 'bg-white p-2 rounded border border-green-200 mb-2 relative';
                        div.innerHTML = `
                            <input type="text" class="w-full border-b mb-1 text-xs outline-none proj-name" placeholder="×©× ××ª×¨" value="${p.name}">
                            <input type="text" class="w-full text-xs outline-none proj-addr" placeholder="×›×ª×•×‘×ª" value="${p.address}">
                            <i onclick="this.parentElement.remove()" class="fas fa-times absolute top-1 left-1 text-gray-300 hover:text-red-500 cursor-pointer"></i>
                        `;
                        container.appendChild(div);
                    });
                }
            } else {
                switchTab('staff');
                document.getElementById('roleSelect').value = user.role;
                document.getElementById('branch').value = user.branch || '';
                document.getElementById('description').value = user.description || '';
            }
        }

        function resetForm() {
            document.getElementById('createForm').reset();
            document.getElementById('editUserId').value = '';
            document.getElementById('formTitle').innerHTML = `<i class="fas fa-user-plus text-blue-600"></i> ×™×¦×™×¨×ª ××©×ª××©`;
            document.getElementById('submitBtn').innerHTML = '<i class="fas fa-save"></i> ×©××•×¨ ×‘××¢×¨×›×ª';
            document.getElementById('submitBtn').className = "win-btn win-btn-primary w-full py-2.5";
            document.getElementById('email').disabled = false;
            document.getElementById('password').disabled = false;
            document.getElementById('cancelBtn').classList.add('hidden');
            document.getElementById('avatarPreview').src = "https://ui-avatars.com/api/?name=New+User";
            document.getElementById('projectsContainer').innerHTML = '';
            updateRoleDesc();
        }

        // --- 4. Submit (Create / Update) ---
        document.getElementById('createForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = document.getElementById('submitBtn');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ××¢×‘×“...';
            btn.disabled = true;

            const editId = document.getElementById('editUserId').value;
            const isEdit = !!editId;

            try {
                // ××™×¡×•×£ × ×ª×•× ×™× ×‘×¡×™×¡×™×™×
                const baseData = {
                    name: document.getElementById('name').value,
                    phone: document.getElementById('phone').value,
                    avatar: document.getElementById('avatar').value || `https://ui-avatars.com/api/?name=${document.getElementById('name').value}`,
                };

                // ××™×¡×•×£ × ×ª×•× ×™× ×œ×¤×™ ×˜××‘
                let finalData = {};
                if (currentTab === 'staff') {
                    finalData = {
                        ...baseData,
                        type: 'staff',
                        role: document.getElementById('roleSelect').value,
                        branch: document.getElementById('branch').value,
                        description: document.getElementById('description').value
                    };
                } else {
                    finalData = {
                        ...baseData,
                        type: 'client',
                        role: 'client',
                        clientNumber: document.getElementById('clientNumber').value,
                        projects: collectProjects()
                    };
                }

                if (isEdit) {
                    // --- ×¢×“×›×•×Ÿ ××©×ª××© ×§×™×™× ---
                    await updateDoc(doc(db, "users", editId), finalData);
                    setStatus(`××©×ª××© ${baseData.name} ×¢×•×“×›×Ÿ!`);
                } else {
                    // --- ×™×¦×™×¨×ª ××©×ª××© ×—×“×© ---
                    const email = document.getElementById('email').value;
                    const password = document.getElementById('password').value;
                    
                    const userCred = await createUserWithEmailAndPassword(auth, email, password);
                    finalData.email = email;
                    finalData.uid = userCred.user.uid;
                    finalData.createdAt = new Date();

                    await setDoc(doc(db, "users", finalData.uid), finalData);
                    setStatus(`××©×ª××© ${baseData.name} × ×•×¦×¨ ×‘×”×¦×œ×—×”!`);
                }

                resetForm();
                loadUsers();

            } catch (error) {
                console.error(error);
                setStatus("×©×’×™××”: " + error.message, true);
                alert("×©×’×™××”: " + error.message);
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        });

        // --- Helpers ---
        function deleteUser(id) {
            if(confirm("×œ××—×•×§ ××ª ×”××©×ª××©? (×¤×¢×•×œ×” ×–×• ×œ× ××•×—×§×ª ××ª ×”×›× ×™×¡×” ×‘-Auth, ×¨×§ ××”×¨×©×™××”)")) {
                deleteDoc(doc(db, "users", id)).then(() => {
                    loadUsers();
                    setStatus("××©×ª××© × ××—×§");
                }).catch(e => alert(e.message));
            }
        }

        function switchTab(tab) {
            currentTab = tab;
            document.querySelectorAll('.win-tab').forEach(b => b.classList.remove('active'));
            document.getElementById(`tab-${tab}`).classList.add('active');
            
            if(tab === 'staff') {
                document.getElementById('staffFields').classList.remove('hidden');
                document.getElementById('clientFields').classList.add('hidden');
            } else {
                document.getElementById('staffFields').classList.add('hidden');
                document.getElementById('clientFields').classList.remove('hidden');
                if(document.getElementById('projectsContainer').children.length === 0) addProjectField();
            }
        }

        function updateRoleDesc() {
            const role = document.getElementById('roleSelect').value;
            const map = {
                'admin': '×× ×›"×œ - ×”×¨×©××” ××œ××” ×œ×›×œ ×”××•×“×•×œ×™×.',
                'ops': '×× ×”×œ ×ª×¤×¢×•×œ - ×©×œ×™×˜×” ×‘×—×"×œ, × ×”×’×™× ×•××œ××™.',
                'purchasing': '×¨×›×© - × ×™×”×•×œ ×¡×¤×§×™× ×•×”×–×× ×•×ª ××™×•×—×“×•×ª.',
                'warehouse': '××—×¡× ××™ - ×’×™×©×” ×œ××¡×•×£ ×œ×™×§×•×˜ ×‘×œ×‘×“.',
                'driver': '× ×”×’ - ×’×™×©×” ×œ××¤×œ×™×§×¦×™×™×ª ×”× ×”×’ ×•× ×™×•×•×˜.'
            };
            document.getElementById('description').value = map[role] || '';
        }

        function updateAvatar() {
            const url = document.getElementById('avatar').value;
            if(url) document.getElementById('avatarPreview').src = url;
        }

        function addProjectField() {
            const div = document.createElement('div');
            div.className = 'bg-white p-2 rounded border border-green-200 mb-2 relative';
            div.innerHTML = `
                <input type="text" class="w-full border-b mb-1 text-xs outline-none proj-name" placeholder="×©× ××ª×¨ (×œ××©×œ: ×•×™×œ×” ×”×¨×¦×œ×™×”)">
                <input type="text" class="w-full text-xs outline-none proj-addr" placeholder="×›×ª×•×‘×ª ××œ××”">
                <i onclick="this.parentElement.remove()" class="fas fa-times absolute top-1 left-1 text-gray-300 hover:text-red-500 cursor-pointer"></i>
            `;
            document.getElementById('projectsContainer').appendChild(div);
        }

        function collectProjects() {
            const projs = [];
            document.querySelectorAll('#projectsContainer > div').forEach(div => {
                const name = div.querySelector('.proj-name').value;
                if(name) projs.push({ name, address: div.querySelector('.proj-addr').value });
            });
            return projs;
        }

        function filterUsers() {
            const q = document.getElementById('searchUser').value.toLowerCase();
            renderTable(usersList.filter(u => u.name.toLowerCase().includes(q) || u.email.includes(q)));
        }

        // Start
        loadUsers();

    </script>
</body>
</html>
